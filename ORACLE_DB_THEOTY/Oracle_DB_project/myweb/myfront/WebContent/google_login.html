<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>test</title>
    <meta
      name="google-signin-client_id"
      content="241916072602-heae1rac9sjh4t615b0k7i0iso0m842o.apps.googleusercontent.com"
    />
  </head>
  <body>
    <ul>
      <li id="GgCustomLogin">
        <a href="javascript:void(0)">
          <span>Login with Google</span>
        </a>
      </li>
    </ul>
    <script>
      //처음 실행하는 함수
      function init() {
        gapi.load('auth2', function () {
          gapi.auth2.init();
          options = new gapi.auth2.SigninOptionsBuilder();
          options.setPrompt('select_account');
          // 추가는 Oauth 승인 권한 추가 후 띄어쓰기 기준으로 추가
          options.setScope(
            'email profile openid https://www.googleapis.com/auth/user.birthday.read'
          );
          // 인스턴스의 함수 호출 - element에 로그인 기능 추가
          // GgCustomLogin은 li태그안에 있는 ID, 위에 설정한 options와 아래 성공,실패시 실행하는 함수들
          gapi.auth2
            .getAuthInstance()
            .attachClickHandler(
              'GgCustomLogin',
              options,
              onSignIn,
              onSignInFailure
            );
        });
      }

      function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();

        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
        var id = 'ID: ' + profile.getId();
        var name = 'Name: ' + profile.getName();
        var email = 'Email: ' + profile.getEmail();
        document.querySelector('div.google_info').innerHTML = id + '<br/>';
        document.querySelector('div.google_info').innerHTML += name + '<br/>';
        document.querySelector('div.google_info').innerHTML += email + '<br/>';
      }
      function onSignInFailure(t) {
        console.log(t);
      }
    </script>

    <script
      src="https://apis.google.com/js/platform.js?onload=init"
      async
      defer
    ></script>
    <hr />
    <div class="google_info"></div>
  </body>
</html>
